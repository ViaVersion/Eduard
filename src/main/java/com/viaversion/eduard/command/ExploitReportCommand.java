package com.viaversion.eduard.command;

import com.viaversion.eduard.ViaEduardBot;
import com.viaversion.eduard.command.base.CommandHandler;
import java.awt.*;
import net.dv8tion.jda.api.EmbedBuilder;
import net.dv8tion.jda.api.entities.Message;
import net.dv8tion.jda.api.events.interaction.command.SlashCommandInteractionEvent;
import net.dv8tion.jda.api.interactions.components.buttons.Button;
import net.dv8tion.jda.api.utils.messages.MessageCreateData;

public final class ExploitReportCommand implements CommandHandler {

    private final ViaEduardBot bot;

    public ExploitReportCommand(final ViaEduardBot bot) {
        this.bot = bot;
    }

    @Override
    public void action(final SlashCommandInteractionEvent event) {
        final Button reportButton = Button.primary("report_exploit", "Report an Exploit");
        event.getChannel().sendMessage(MessageCreateData.fromEmbeds(new EmbedBuilder()
            .setTitle("**Got an exploit?**")
            .setColor(new Color(194, 25, 48))
            .setDescription(bot.getExploitReportMessage())
            .build())
        ).addActionRow(reportButton).queue();
        event.reply("Added!").setEphemeral(true).queue();
    }
}
